#!/bin/sh

if [ $# -eq 0 ] ; then
	if [ -d src/main/java ] ; then
		dir=src/main/java
	else
		dir=src
	fi
else
	dir="$1"
fi

hg annotate -u "$dir" resources/js |
awk -F: '{ u[$1]++ } END { for (i in u) print i, u[i] }' |
sed -e 's/^[\ \t]\+//g' -e 's/[\ \t]\+/ /g' -e 's/^b /bill /' |
awk '{ s[$1] += $2 } END { total = 0; for (i in s) { total += s[i]; print i, s[i] } print "total", total }' |
sort -k2,2n

# let is_bash=1
# setup vim: set syntax=sh :
